import{r as n,a as i,j as e}from"./index-DH2IhMRx.js";const y=()=>{const[o,r]=n.useState(null),[x,m]=n.useState(!0),[u,p]=n.useState(""),[f,b]=n.useState(null),[a,c]=n.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[l,d]=n.useState({email:!0,push:!0});n.useEffect(()=>{i.get("/api/user").then(s=>{r(s.data),d({email:s.data.notifications.email,push:s.data.notifications.push}),m(!1)}).catch(s=>{p("Failed to load user data"),m(!1)})},[]);const w=s=>{s.preventDefault();const t=new FormData;t.append("profilePic",f),t.append("name",o.name),t.append("email",o.email),i.put("/api/user/profile",t).then(h=>{r(h.data),alert("Profile updated successfully!")}).catch(h=>{alert("Failed to update profile")})},N=s=>{if(s.preventDefault(),a.newPassword!==a.confirmPassword){alert("Passwords do not match!");return}i.put("/api/user/password",{oldPassword:a.oldPassword,newPassword:a.newPassword}).then(t=>{alert("Password updated successfully!"),c({oldPassword:"",newPassword:"",confirmPassword:""})}).catch(t=>{alert("Failed to change password")})},j=s=>{s.preventDefault(),i.put("/api/user/notifications",l).then(t=>{alert("Notification preferences updated")}).catch(t=>{alert("Failed to update notifications")})},g=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&i.delete("/api/user").then(t=>{alert("Account deleted successfully")}).catch(t=>{alert("Failed to delete account")})},P=()=>{window.localStorage.removeItem("auth_token"),window.location.href="/login"};return x?e.jsx("div",{children:"Loading..."}):u?e.jsx("div",{children:u}):e.jsxs("div",{className:"settings-page p-6",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Settings"}),e.jsxs("div",{className:"profile-info mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Profile Information"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Name"}),e.jsx("input",{type:"text",className:"input",value:o.name,onChange:s=>r({...o,name:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Email"}),e.jsx("input",{type:"email",className:"input",value:o.email,onChange:s=>r({...o,email:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Profile Picture"}),e.jsx("input",{type:"file",className:"input",onChange:s=>b(s.target.files[0])})]}),e.jsx("button",{className:"btn bg-blue-600 text-white",children:"Save Changes"})]})]}),e.jsxs("div",{className:"password-settings mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Password and Security"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Old Password"}),e.jsx("input",{type:"password",className:"input",value:a.oldPassword,onChange:s=>c({...a,oldPassword:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"New Password"}),e.jsx("input",{type:"password",className:"input",value:a.newPassword,onChange:s=>c({...a,newPassword:s.target.value})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Confirm New Password"}),e.jsx("input",{type:"password",className:"input",value:a.confirmPassword,onChange:s=>c({...a,confirmPassword:s.target.value})})]}),e.jsx("button",{className:"btn bg-blue-600 text-white",children:"Change Password"})]})]}),e.jsxs("div",{className:"notifications-settings mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Notification Preferences"}),e.jsxs("form",{onSubmit:j,children:[e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.email,onChange:()=>d({...l,email:!l.email}),className:"mr-2"}),"Email Notifications"]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.push,onChange:()=>d({...l,push:!l.push}),className:"mr-2"}),"Push Notifications"]})}),e.jsx("button",{className:"btn bg-blue-600 text-white",children:"Save Preferences"})]})]}),e.jsxs("div",{className:"delete-account mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Delete Account"}),e.jsx("button",{onClick:g,className:"btn bg-red-600 text-white",children:"Delete Account"})]}),e.jsx("div",{className:"logout",children:e.jsx("button",{onClick:P,className:"btn bg-gray-600 text-white",children:"Logout"})})]})};export{y as default};
